<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Wiki for everything about BulletBot, a general purpose Discord bot"><link rel="shortcut icon" href=../media/BulletBot.svg><meta name=generator content="mkdocs-1.1.2, mkdocs-material-6.2.4"><title>In Depth Explanations - BulletBot</title><link rel=stylesheet href=../assets/stylesheets/main.15aa0b43.min.css><link rel=stylesheet href=../assets/stylesheets/palette.75751829.min.css><meta name=theme-color content=#2094f3><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style></head> <body dir=ltr data-md-color-scheme=slate data-md-color-primary=blue data-md-color-accent=blue> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#in-depth-explanations class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <style>
.md-header {
  position: sticky;
  top: 0;
  right: 0;
  left: 0;
  z-index: 2;
  height: px2rem(48px);
  color: var(--md-primary-bg-color);
  background: linear-gradient(180deg, rgba(2,0,36,1) 0%, rgba(32,148,243,1) 200%);
  box-shadow:
    0 0           px2rem(4px) rgba(0, 0, 0, 0),
    0 px2rem(4px) px2rem(8px) rgba(0, 0, 0, 0);
  transition:
    color            250ms,
    background-color 250ms;

  .no-js & {
    box-shadow: none;
    transition: none;
  }

  &[data-md-state="shadow"] {
    box-shadow:
      0 0           px2rem(4px) rgba(0, 0, 0, 0.1),
      0 px2rem(4px) px2rem(8px) rgba(0, 0, 0, 0.2);
    transition:
      color            250ms,
      background-color 250ms,
      box-shadow       250ms;
  }

  @media print {
    display: none;
  }
}
</style> <header class=md-header data-md-component=header> <nav class="md-header-nav md-grid" aria-label=Header> <a href=.. title=BulletBot class="md-header-nav__button md-logo" aria-label=BulletBot> <img src=../media/BulletBot.svg alt=logo> </a> <!-- Button to open drawer --> <label class="md-header-nav__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <!-- Header title --> <div class=md-header-nav__title data-md-component=header-title> <div class=md-header-nav__ellipsis> <span class="md-header-nav__topic md-ellipsis"> BulletBot </span> <span class="md-header-nav__topic md-ellipsis"> In Depth Explanations </span> </div> </div> <!-- Button to open search dialogue --> <label class="md-header-nav__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <!-- Search interface --> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query data-md-state=active required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <button type=reset class="md-search__icon md-icon" aria-label=Clear data-md-component=search-reset tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <!-- Repository containing source --> <div class=md-header-nav__source> <a href=https://github.com/CodeBullet-Community/BulletBot/ title="Go to repository" class=md-source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=.. title=BulletBot class="md-nav__button md-logo" aria-label=BulletBot> <img src=../media/BulletBot.svg alt=logo> </a> BulletBot </label> <div class=md-nav__source> <a href=https://github.com/CodeBullet-Community/BulletBot/ title="Go to repository" class=md-source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1 type=checkbox id=nav-1 checked> <label class=md-nav__link for=nav-1> Home <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Home data-md-level=1> <label class=md-nav__title for=nav-1> <span class="md-nav__icon md-icon"></span> Home </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=.. class=md-nav__link> Introduction </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-2 type=checkbox id=nav-1-2> <label class=md-nav__link for=nav-1-2> Commands <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Commands data-md-level=2> <label class=md-nav__title for=nav-1-2> <span class="md-nav__icon md-icon"></span> Commands </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Commands/Commands-Readme/ class=md-nav__link> Readme </a> </li> <li class=md-nav__item> <a href=../Commands/Commands/ class=md-nav__link> Commands List </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> In Depth Explanations <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> In Depth Explanations </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#installers class=md-nav__link> Installers </a> <nav class=md-nav aria-label=Installers> <ul class=md-nav__list> <li class=md-nav__item> <a href=#installer-hierarchy class=md-nav__link> Installer Hierarchy </a> <nav class=md-nav aria-label="Installer Hierarchy"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#master-installer class=md-nav__link> Master Installer </a> </li> <li class=md-nav__item> <a href=#sub-master-installers class=md-nav__link> Sub-Master Installers </a> </li> <li class=md-nav__item> <a href=#sub-installers class=md-nav__link> Sub-Installers </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#bulletbot-system-user class=md-nav__link> BulletBot System User </a> </li> <li class=md-nav__item> <a href=#running-bulletbot class=md-nav__link> Running BulletBot </a> <nav class=md-nav aria-label="Running BulletBot"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#run-bulletbot-in-the-background-with-auto-restart class=md-nav__link> Run BulletBot in the background with auto-restart </a> <nav class=md-nav aria-label="Run BulletBot in the background with auto-restart"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#bash-script class=md-nav__link> Bash Script </a> </li> <li class=md-nav__item> <a href=#service-file class=md-nav__link> Service File </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#run-bulletbot-in-the-background class=md-nav__link> Run BulletBot in the background </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#downloading-and-updating-bulletbot class=md-nav__link> Downloading and Updating BulletBot </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#bulletbot-modules-and-code class=md-nav__link> BulletBot Modules and Code </a> <nav class=md-nav aria-label="BulletBot Modules and Code"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#commands-module class=md-nav__link> Commands Module </a> <nav class=md-nav aria-label="Commands Module"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#commands-file-structure class=md-nav__link> Commands File Structure </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#filters-module class=md-nav__link> Filters Module </a> </li> <li class=md-nav__item> <a href=#mstats-module class=md-nav__link> MStats Module </a> </li> <li class=md-nav__item> <a href=#pactions-module class=md-nav__link> PActions Module </a> </li> <li class=md-nav__item> <a href=#webhook-system class=md-nav__link> Webhook System </a> <nav class=md-nav aria-label="Webhook System"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#youtube-webhooks class=md-nav__link> YouTube Webhooks </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#command-cache class=md-nav__link> Command Cache </a> </li> <li class=md-nav__item> <a href=#rankpermission-system class=md-nav__link> Rank/Permission System </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../License/ class=md-nav__link> License </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-2 type=checkbox id=nav-2> <label class=md-nav__link for=nav-2> Setup Guides <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Setup Guides" data-md-level=1> <label class=md-nav__title for=nav-2> <span class="md-nav__icon md-icon"></span> Setup Guides </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-2-1 type=checkbox id=nav-2-1> <label class=md-nav__link for=nav-2-1> Production <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Production data-md-level=2> <label class=md-nav__title for=nav-2-1> <span class="md-nav__icon md-icon"></span> Production </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Setup-Guides/Production/Linux-Prod-Setup-Guide/ class=md-nav__link> Linux </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-2-2 type=checkbox id=nav-2-2> <label class=md-nav__link for=nav-2-2> Development <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Development data-md-level=2> <label class=md-nav__title for=nav-2-2> <span class="md-nav__icon md-icon"></span> Development </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Setup-Guides/Development/Linux-Dev-Setup-Guide/ class=md-nav__link> Linux </a> </li> <li class=md-nav__item> <a href=../Setup-Guides/Development/Windows-Dev-Setup-Guide/ class=md-nav__link> Windows </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-2-3 type=checkbox id=nav-2-3> <label class=md-nav__link for=nav-2-3> Helpful Guides <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Helpful Guides" data-md-level=2> <label class=md-nav__title for=nav-2-3> <span class="md-nav__icon md-icon"></span> Helpful Guides </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Helpful-Guides/Creating-%26-Inviting-A-Bot/ class=md-nav__link> Create A Bot </a> </li> <li class=md-nav__item> <a href=../Helpful-Guides/Creating-%26-Inviting-A-Bot/ class=md-nav__link> Invite A Bot </a> </li> <li class=md-nav__item> <a href=../Helpful-Guides/Bot-Token/ class=md-nav__link> Bot Token </a> </li> <li class=md-nav__item> <a href=../Helpful-Guides/Google-API-Setup/ class=md-nav__link> Google API Key </a> </li> <li class=md-nav__item> <a href=../Helpful-Guides/MongoDB-Compass/ class=md-nav__link> MongoDB Compass </a> </li> <li class=md-nav__item> <a href=../Helpful-Guides/BulletBot-Startup-Status-Reports/ class=md-nav__link> BSSR </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3 type=checkbox id=nav-3> <label class=md-nav__link for=nav-3> Development <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Development data-md-level=1> <label class=md-nav__title for=nav-3> <span class="md-nav__icon md-icon"></span> Development </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../dev-documentation/ class=md-nav__link> Readme </a> </li> <li class=md-nav__item> <a href=../dev-documentation/structure/ class=md-nav__link> Structure </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3-3 type=checkbox id=nav-3-3> <label class=md-nav__link for=nav-3-3> Database <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Database data-md-level=2> <label class=md-nav__title for=nav-3-3> <span class="md-nav__icon md-icon"></span> Database </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../dev-documentation/database/main/ class=md-nav__link> main </a> </li> <li class=md-nav__item> <a href=../dev-documentation/database/mStats/ class=md-nav__link> mStats </a> </li> <li class=md-nav__item> <a href=../dev-documentation/database/settings/ class=md-nav__link> settings </a> </li> <li class=md-nav__item> <a href=../dev-documentation/database/webhooks/ class=md-nav__link> webhooks </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#installers class=md-nav__link> Installers </a> <nav class=md-nav aria-label=Installers> <ul class=md-nav__list> <li class=md-nav__item> <a href=#installer-hierarchy class=md-nav__link> Installer Hierarchy </a> <nav class=md-nav aria-label="Installer Hierarchy"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#master-installer class=md-nav__link> Master Installer </a> </li> <li class=md-nav__item> <a href=#sub-master-installers class=md-nav__link> Sub-Master Installers </a> </li> <li class=md-nav__item> <a href=#sub-installers class=md-nav__link> Sub-Installers </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#bulletbot-system-user class=md-nav__link> BulletBot System User </a> </li> <li class=md-nav__item> <a href=#running-bulletbot class=md-nav__link> Running BulletBot </a> <nav class=md-nav aria-label="Running BulletBot"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#run-bulletbot-in-the-background-with-auto-restart class=md-nav__link> Run BulletBot in the background with auto-restart </a> <nav class=md-nav aria-label="Run BulletBot in the background with auto-restart"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#bash-script class=md-nav__link> Bash Script </a> </li> <li class=md-nav__item> <a href=#service-file class=md-nav__link> Service File </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#run-bulletbot-in-the-background class=md-nav__link> Run BulletBot in the background </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#downloading-and-updating-bulletbot class=md-nav__link> Downloading and Updating BulletBot </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#bulletbot-modules-and-code class=md-nav__link> BulletBot Modules and Code </a> <nav class=md-nav aria-label="BulletBot Modules and Code"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#commands-module class=md-nav__link> Commands Module </a> <nav class=md-nav aria-label="Commands Module"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#commands-file-structure class=md-nav__link> Commands File Structure </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#filters-module class=md-nav__link> Filters Module </a> </li> <li class=md-nav__item> <a href=#mstats-module class=md-nav__link> MStats Module </a> </li> <li class=md-nav__item> <a href=#pactions-module class=md-nav__link> PActions Module </a> </li> <li class=md-nav__item> <a href=#webhook-system class=md-nav__link> Webhook System </a> <nav class=md-nav aria-label="Webhook System"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#youtube-webhooks class=md-nav__link> YouTube Webhooks </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#command-cache class=md-nav__link> Command Cache </a> </li> <li class=md-nav__item> <a href=#rankpermission-system class=md-nav__link> Rank/Permission System </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <a href=https://github.com/CodeBullet-Community/BulletBot/edit/master/docs/In-Depth-Explanations.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg> </a> <h1 id=in-depth-explanations>In Depth Explanations<a class=headerlink href=#in-depth-explanations title="Permanent link">&para;</a></h1> <p>Here we will be looking in-depth at different aspects of BulletBot and the Installers.</p> <p>This document is broken up into two parts: <a href=#installers>Installers</a> and <a href=#bulletbot-modules-and-code>BulletBot Modules and Code</a>. The "Installers" section focuses on all the important things that the installers do. It will go in-depth about how and why it does some of the things it does. The "BulletBot Modules and Code" section explains the basic working of the different parts of BulletBot (called modules). This can help you gain a basic overview of the bot.</p> <h2 id=installers>Installers<a class=headerlink href=#installers title="Permanent link">&para;</a></h2> <p>As their name implies, the installers are designed for installing and setting up BulletBot. On top of this, they keep BulletBot up to date by giving users the option to download the newest release, run BulletBot in different run modes, and so on.</p> <div class="admonition important"> <p class=admonition-title>Important</p> <ul> <li>The installers are designed to only work on Linux based systems.</li> </ul> </div> <h3 id=installer-hierarchy>Installer Hierarchy<a class=headerlink href=#installer-hierarchy title="Permanent link">&para;</a></h3> <p>Many of the terms used throughout the guides, documentation, and scripts, are things such as "master installer", "sub-master installers", and "sub-installers". They refer to different types/groups of installers that perform specific tasks and execute/are executed by other installers.</p> <h4 id=master-installer>Master Installer<a class=headerlink href=#master-installer title="Permanent link">&para;</a></h4> <p>The master installer (<code>linux-master-installer.sh</code>) is used for identifying and determining whether BulletBot supports the system it's running on. After confirming that the system is supported, the master installer then executes the <a href=#sub-master-installers>sub-master installer</a> that corresponds to it's designed Linux Distribution.</p> <details class=info><summary>Unsupported doesn't mean incompatible</summary><p>Just because the master installer determines that the system is not supported, does not mean that the system is not compatible. What the master installer deems as "supported", is an <a href=../Setup-Guides/Production/Linux-Prod-Setup-Guide/#officially-supported-linux-distributions>Officially Supported Linux Distribution</a>. These distributions are Linux Distros that BulletBot has been tested and are confirmed to work on. So even if a system is not "officially supported", that does not mean that it won't work on that system.</p> </details> <h4 id=sub-master-installers>Sub-Master Installers<a class=headerlink href=#sub-master-installers title="Permanent link">&para;</a></h4> <p>The sub-master installers (<code>centos-rhel-installer.sh</code> and <code>debian-ubuntu-installer.sh</code>) perform the actual installation and setting up of BulletBot. They install all required prerequisites, assist in setting up BulletBot's config file, and starting BulletBot in different run modes.</p> <p>Because BulletBot is supported on several Linux Distributions that are different in many ways, two sub-master installers had to be created to account for those differences. As the names of each sub-master installer imply, <code>centos-rhel-installer.sh</code> is used on CentOS and RHEL Linux Distros, while <code>debian-ubuntu-installer.sh</code> is used on Debian and Ubuntu Linux Distros.</p> <h4 id=sub-installers>Sub-Installers<a class=headerlink href=#sub-installers title="Permanent link">&para;</a></h4> <p>The sub-installers refer to all the other installers/scripts and are always executed by the sub-master installers.</p> <h3 id=bulletbot-system-user>BulletBot System User<a class=headerlink href=#bulletbot-system-user title="Permanent link">&para;</a></h3> <p>One thing that the installers do immediately after running for the first time is to create a system user named <code>bulletbot</code>, along with a home directory for that user. It is in this home directory that all of BulletBot's code is stored.</p> <p>There are two main reasons for the creation of this user:</p> <ol> <li>The first and major reason is due to security. By creating <code>bulletbot</code> and having that user run services used by/for BulletBot, it is easier to track what each of them is doing. On top of that, any service ran by <code>bulletbot</code>, will only have the permissions required to perform their task (A.K.A., the principle of least privilege).</li> <li>The second reason is that having a home directory where all of BulletBot’s code can be stored, creates a centralized location where one can always expect it to be. This also makes it easier for the end-user, as well as us, in terms of programming.</li> </ol> <h3 id=running-bulletbot>Running BulletBot<a class=headerlink href=#running-bulletbot title="Permanent link">&para;</a></h3> <p>BulletBot is run by a service called <code>bulletbot.service</code>, which is created when the installers are executed for the first time.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <ul> <li><code>bulletbot.service</code> should never be enabled.</li> <li><code>bulletbot.service</code> is run by the <code>bulletbot</code> user.</li> </ul> </div> <p>BulletBot has two main methods/modes of running:</p> <h4 id=run-bulletbot-in-the-background-with-auto-restart>Run BulletBot in the background with auto-restart<a class=headerlink href=#run-bulletbot-in-the-background-with-auto-restart title="Permanent link">&para;</a></h4> <p>This method runs BulletBot in the background of your system. If the system is restarted or shutdown, BulletBot will automatically be started upon system reboot.</p> <p>This run mode is dependent on two files: a service file (<code>bullet-mongo-start.service</code>) and a bash script (<code>bullet-mongo-start.sh</code>).</p> <h5 id=bash-script>Bash Script<a class=headerlink href=#bash-script title="Permanent link">&para;</a></h5> <p>The bash script makes sure that BulletBot is started correctly. A problem we ran into was that if <code>bulletbot.service</code> was enabled, BulletBot would start before the database had fully initialized. It occurred even when <code>bulletbot.service</code> was told to only start after <code>mongod.service</code> started. As a solution, we created this bash script.</p> <p>After being executed by <code>bullet-mongo-start.service</code>, the script waits to make sure that <code>mongod.service</code> successfully started, then waits a little longer to give the database enough time to initialize. Once all that is done, the script will attempt to start <code>bulletbot.service</code>.</p> <p>On top of everything mentioned above, this script also has the capability of sending 'BulletBot Startup Status Reports'. These are sent when BulletBot is being ran in the background with auto-restart. These reports lists whether or not BulletBot was successfully started, the exit status of essential services, and the startup logs of three services that can be used to help identify errors that might have occurred during BulletBot's startup. Though please note that for this feature to work, you need to install third party mailing software. Follow <a href=../Helpful-Guides/BulletBot-Startup-Status-Reports/ >this guide</a> to help you set this feature up.</p> <h5 id=service-file>Service File<a class=headerlink href=#service-file title="Permanent link">&para;</a></h5> <p>The purpose of the service file is to initiate the auto-restart process. It is done by having the service execute <code>bullet-mongo-start.sh</code> on system reboot.</p> <p>This service is the sole decider of whether or not BulletBot is run with or without auto-restart. When the service is enabled, BulletBot will run WITH auto-restart, but if disabled, it will run WITHOUT auto-restart.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p><code>bullet-mongo-start.service</code> is NOT run by the <code>bulletbot</code> user, because the service needs to run as the root user to allow <code>bullet-mongo-start.sh</code> to start <code>bulletbot.service</code>.</p> </div> <h4 id=run-bulletbot-in-the-background>Run BulletBot in the background<a class=headerlink href=#run-bulletbot-in-the-background title="Permanent link">&para;</a></h4> <p>Just like the method above, this method will start bulletbot in the background of the system, except when the system is restarted or shutdown, BulletBot will NOT be started upon system reboot.</p> <p>As mentioned in the description of the <a href=#service-file>service file</a>, if <code>bullet-mongo-start.service</code> is disabled, the run mode will default to this one. This applies even if you specifically started BulletBot with auto-restart.</p> <h3 id=downloading-and-updating-bulletbot>Downloading and Updating BulletBot<a class=headerlink href=#downloading-and-updating-bulletbot title="Permanent link">&para;</a></h3> <p>Every time you download/update BulletBot, the installers will first archive all of BulletBot's code currently in <code>/home/bulletbot/</code>, to <code>Old_BulletBot/${date}</code> (${date} is the time at which BulletBot's code is archived).</p> <p>Currently, the installers do not manage any of the archives it creates. This means that the number of archives it creates in <code>Old_BulletBot</code> will continue to grow and increase in size. If you would like to remove old archives, you will need to manually delete them. Each are labeled with the date at which they were created (formatted as such: Wed Apr 29 23:28:10 PDT 2020), which will make it easier identifying what archives are old and which ones are new.</p> <h2 id=bulletbot-modules-and-code>BulletBot Modules and Code<a class=headerlink href=#bulletbot-modules-and-code title="Permanent link">&para;</a></h2> <h3 id=commands-module>Commands Module<a class=headerlink href=#commands-module title="Permanent link">&para;</a></h3> <p>This module loads and manages all commands. Its main class is located at <a href=https://github.com/CodeBullet-Community/BulletBot/blob/master/src/commands.ts><code>src/commands.ts</code></a>. Commands are stored in two different variables. One is a single array of all commands, and the other is an object structured with subcategories (<code>strucObject</code>). The subcategory names in the strucObject are all lowercase, and there is a property named <code>_categoryName</code> which holds the unmodified name of the subcategory.</p> <h4 id=commands-file-structure>Commands File Structure<a class=headerlink href=#commands-file-structure title="Permanent link">&para;</a></h4> <p>The Commands module imports the commands based on their location in the <a href=https://github.com/CodeBullet-Community/BulletBot/blob/master/src/commands><code>commands</code></a> directory. If they are in a subdirectory, they will be loaded into a subcategory of the subdirectories name. Because of this, the file location and subdirectory names are essential. The actual name of the file holding the command isn't crucial, as the module takes the name specified in the command object.</p> <h3 id=filters-module>Filters Module<a class=headerlink href=#filters-module title="Permanent link">&para;</a></h3> <p>The Filters module is build up like the Commands Module.</p> <h3 id=mstats-module>MStats Module<a class=headerlink href=#mstats-module title="Permanent link">&para;</a></h3> <p>MStats module stands for "management statistics module", which is responsible for logging statistical data about bot usage to the database. It caches all data and saves it to the database at a certain interval (every 10 seconds). Each hour (at <code>XX:00:01</code>), it creates a new hour document to save to. After a day (at <code>00:00:01</code>), it also summarizes the statistics of the last 24 hours and saves it to a day document and also adds its information to an all-time document, which is a summary of all statistical data. The hour documents of the last day will then be deleted from the database, which means the first 24 hours the stats are precise to the hour and after that only to the day. For more information about what the MStats module stores see the <a href=https://github.com/CodeBullet-Community/BulletBot/blob/master/docs/dev-documentation/database/mStats.md>database documentation</a></p> <h3 id=pactions-module>PActions Module<a class=headerlink href=#pactions-module title="Permanent link">&para;</a></h3> <p>The PActions module is responsible for saving time delayed tasks and then executing them. Its name stands for <code>pending Actions</code>. All tasks that are scheduled with this module get saved to the <code>main</code> database in the <code>pActions</code> collection. This is done to ensure that the tasks still get executed when the bot randomly crashes. If nodes native function <code>setTimeout</code> would have been used, there wouldn't have been a way to save this somewhere. The PActions module periodically checks the database for tasks that need to be executed. The interval between checks is defined by the <code>pActionsInterval</code> (in milliseconds) in the <code>bot-config.json</code> file. When a task is executed, PActions will treat the argument differently depending on the tasks action ID, which are defined in the <a href=https://github.com/CodeBullet-Community/BulletBot/blob/master/src/database/schemas.ts#L540><code>schema.ts</code> file</a></p> <h3 id=webhook-system>Webhook System<a class=headerlink href=#webhook-system title="Permanent link">&para;</a></h3> <p>Unlike in other bots, where creating a webhook just creates a discord webhook, BulletBot directs the webhook to its server to "catch" and then manually sends a message in the channel. This is done so unmentionable Mentions can be used. The bot has one port dedicated to catching webhooks from all services (currently only YouTube). Because each service has it's own data structure when returning webhook data, each service has a custom catcher that listens on a different path. The <code>catcher.ts</code> file only is responsible for creating an express server and getting all catchers for all services.</p> <h4 id=youtube-webhooks>YouTube Webhooks<a class=headerlink href=#youtube-webhooks title="Permanent link">&para;</a></h4> <p>For YouTube webhooks, the bot uses the PubSubHubbub protocol and the <a href=https://pubsubhubbub.appspot.com/subscribe>hub</a> provided by Google. It only subscribes to every channel once, so if different servers have webhooks for the same channel, the bot will only subscribe the first time.</p> <h3 id=command-cache>Command Cache<a class=headerlink href=#command-cache title="Permanent link">&para;</a></h3> <p>Some commands require the user to reply with more information (<code>?!abc</code> as an example). To do this, BulletBot uses something called command caches. This allows a command to temporarily store data the user previously provided and also makes the bot send the reply message which doesn't have the prefix with the command to the specific command. For this to also work in DMs, the cache only stores the channel and the user ID, not the server ID. Then each time the bot receives a message, it checks if there is a command cache for that user and channel. If there is one, it will call the command as it normally would but also passes the command cache as a parameter. What the command does with that depends on the command. To check how the command cache document is build up check out the <a href=https://github.com/CodeBullet-Community/BulletBot/blob/master/docs/dev-documentation/database/main.md#commands-collection-document>database documentation</a>.</p> <h3 id=rankpermission-system>Rank/Permission System<a class=headerlink href=#rankpermission-system title="Permanent link">&para;</a></h3> <p>BulletBot uses a very common rank system where you can add users or roles to a list of a certain rank. There are the following ranks:</p> <ul> <li>Bot Master</li> <li>Admin</li> <li>Mod</li> <li>Immune</li> <li>Member</li> </ul> <p>By default, every non-admin member is a <code>Member</code> and only members with admin permissions have the <code>Admin</code> rank (without being in the <code>Admin</code> list). In addition to the normal <code>Admin</code> and <code>Mod</code> ranks there is also the <code>Immune</code> rank which can exclude a user from currently non-existent auto-moderation and <code>Bot Master</code> which can only have users in its list and is defined in the <code>botMasters</code> property of the <code>bot-config.json</code> file. Users in that list have the the highest permission level in every server.</p> <hr> <div class=md-source-date> <small> Last update: <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">May 5, 2020</span> </small> </div> </article> </div> </div> </main> <footer class=md-footer> <div class=md-footer-nav> <nav class="md-footer-nav__inner md-grid" aria-label=Footer> <a href=../Commands/Commands/ class="md-footer-nav__link md-footer-nav__link--prev" rel=prev> <div class="md-footer-nav__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer-nav__title> <div class=md-ellipsis> <span class=md-footer-nav__direction> Previous </span> Commands List </div> </div> </a> <a href=../License/ class="md-footer-nav__link md-footer-nav__link--next" rel=next> <div class=md-footer-nav__title> <div class=md-ellipsis> <span class=md-footer-nav__direction> Next </span> License </div> </div> <div class="md-footer-nav__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg> </div> </a> </nav> </div> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-footer-social> <a href=https://discord.gg/74py7yd target=_blank rel=noopener title=discord.gg class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M297.216 243.2c0 15.616-11.52 28.416-26.112 28.416-14.336 0-26.112-12.8-26.112-28.416s11.52-28.416 26.112-28.416c14.592 0 26.112 12.8 26.112 28.416zm-119.552-28.416c-14.592 0-26.112 12.8-26.112 28.416s11.776 28.416 26.112 28.416c14.592 0 26.112-12.8 26.112-28.416.256-15.616-11.52-28.416-26.112-28.416zM448 52.736V512c-64.494-56.994-43.868-38.128-118.784-107.776l13.568 47.36H52.48C23.552 451.584 0 428.032 0 398.848V52.736C0 23.552 23.552 0 52.48 0h343.04C424.448 0 448 23.552 448 52.736zm-72.96 242.688c0-82.432-36.864-149.248-36.864-149.248-36.864-27.648-71.936-26.88-71.936-26.88l-3.584 4.096c43.52 13.312 63.744 32.512 63.744 32.512-60.811-33.329-132.244-33.335-191.232-7.424-9.472 4.352-15.104 7.424-15.104 7.424s21.248-20.224 67.328-33.536l-2.56-3.072s-35.072-.768-71.936 26.88c0 0-36.864 66.816-36.864 149.248 0 0 21.504 37.12 78.08 38.912 0 0 9.472-11.52 17.152-21.248-32.512-9.728-44.8-30.208-44.8-30.208 3.766 2.636 9.976 6.053 10.496 6.4 43.21 24.198 104.588 32.126 159.744 8.96 8.96-3.328 18.944-8.192 29.44-15.104 0 0-12.8 20.992-46.336 30.464 7.68 9.728 16.896 20.736 16.896 20.736 56.576-1.792 78.336-38.912 78.336-38.912z"/></svg> </a> <a href=https://github.com/CodeBullet-Community/BulletBot target=_blank rel=noopener title=github.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> </div> </div> </div> </footer> </div> <script src=../assets/javascripts/vendor.93c04032.min.js></script> <script src=../assets/javascripts/bundle.83e5331e.min.js></script><script id=__lang type=application/json>{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script> <script>
        app = initialize({
          base: "..",
          features: ['instant', 'tabs'],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.8c7e0a7e.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script> </body> </html>